<!doctype html>
<html>
    <head>

    	<!-- The '/homey.js' script must be included in your settings view to work -->
	    <script type="text/javascript" src="/homey.js" data-origin="settings"></script>

    </head>
    <body>

        <h1 data-i18n="settings.title">
        	<!--
        	This field will automatically be filled by a translated string with key 'settings.title'.
        	Read more about translations at Internationalization.
        	-->
        </h1>
        <p data-i18n="settings.subtitle">
        	<!--
        	This field will also be translated
			-->
        </p>

        <fieldset>
            <legend>Settings</legend>
            
            <div class="field row">
				<select id="area">
				  <option value="SYS">System - SYS</option>
				  <option value="SE1">Sweden - SE1</option>
				  <option value="SE2">Sweden - SE2</option>
				  <option value="SE3">Sweden - SE3</option>
				  <option value="SE4">Sweden - SE4</option>
				  <option value="OSLO">Norway - OSLO</option>
				  <option value="KR.SAND">Norway - KR.SAND</option>
				  <option value="BERGEN">Norway - BERGEN</option>
				  <option value="TR.HEIM">Norway - TR.HEIM</option>
				  <option value="MOLDE">Norway - MOLDE</option>
				  <option value="TROMSØ">Norway - TROMSØ</option>
				  <option value="DK1">Denmark - DK1</option>
				  <option value="DK2">Denmark - DK2</option>
				  <option value="FI">Finland</option>
				  <option value="EE">Estonia - EE</option>
				  <option value="LV">Latvia - LV</option>
				  <option value="LT">Lithuania - LT</option>
				</select>
			</div>

            <div class="field row">
				<select id="currency">
				  <option value="EUR">EUR</option>
				  <option value="SEK">SEK</option>
				  <option value="NOK">NOK</option>
				  <option value="DKK">DKK</option>
				</select>
			</div>
                

        </fieldset>

        <button id="save" class="right">Save changes</button>
		
		<p>To find out your zone, please visit <a href"https://www.nordpoolgroup.com/maps/#/nordic">Nordpool map</a></p>.

        <script type="text/javascript">

        // a method named 'onHomeyReady' must be present in your code
        function onHomeyReady( Homey ){

	        // Tell Homey we're ready to be displayed
            Homey.ready();

            var areaElement = document.getElementById('area');
            var currencyElement = document.getElementById('currency');
            var saveElement = document.getElementById('save');

            Homey.get('area', function( err, area ) {
	           if( err ) return Homey.alert( err );
			   areaElement.value = area;
	        });

            Homey.get('currency', function( err, currency ) {
	           if( err ) return Homey.alert( err );
			   currencyElement.value = currency;
	        });

	        saveElement.addEventListener('click', function(e) {

	            Homey.set('area', areaElement.value, function( err ){
		            if( err ) return Homey.alert( err );
	            });
	            Homey.set('currency', currencyElement.value, function( err ){
		            if( err ) return Homey.alert( err );
	            });

	        });
        }
        </script>

    </body>
</html>
